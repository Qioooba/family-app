# 🚀 家庭小程序完整开发计划

## 📋 项目概况
- **项目名称**: 家庭助手 (Family Assistant)
- **目标**: 打造一站式智能家庭管理平台
- **当前进度**: 核心功能100%，拓展功能进行中

---

## ✅ 已完成功能清单

### 核心功能（100%）
1. ✅ 用户系统 - 注册/登录/权限
2. ✅ 家庭管理 - 创建/加入/成员管理
3. ✅ 任务清单 - 增删改查/分类/完成
4. ✅ 心愿墙 - 发布/认领/进度
5. ✅ 智能菜谱 - 列表/收藏/AI推荐
6. ✅ 饮食记录 - 拍照/卡路里统计
7. ✅ 纪念日 - 日历/倒计时
8. ✅ 家庭投票 - 创建/投票/统计
9. ✅ 家庭圈 - 动态/点赞/评论
10. ✅ 智能购物 - 清单/库存/临期提醒
11. ✅ 家庭游戏 - 转盘/积分/排行榜
12. ✅ AI助手 - 对话/日报/菜谱推荐
13. ✅ 数据看板 - 统计/图表/徽章
14. ✅ 个人中心 - 信息/积分/设置

### 数据库（100%）
- ✅ 25张核心表
- ✅ 14张拓展表

---

## 🔨 开发中功能清单

### 第一阶段：任务系统增强（预计2天）

#### 1.1 重复任务功能
**数据库**: task表增加repeat_type, repeat_rule字段 ✅
**后端API**:
- [ ] POST /api/task/{id}/repeat - 设置重复规则
- [ ] GET /api/task/repeat-due - 获取今日重复任务
- [ ] 定时任务生成器（每天凌晨生成当日任务）

**前端页面**:
- [ ] 任务创建/编辑页添加重复设置选项
- [ ] 重复规则选择器（每天/每周/每月/自定义）

#### 1.2 子任务功能
**数据库**: task_subtask表 ✅
**后端API**:
- [ ] POST /api/task/{id}/subtask - 添加子任务
- [ ] PUT /api/subtask/{id}/toggle - 切换完成状态
- [ ] DELETE /api/subtask/{id} - 删除子任务
- [ ] GET /api/task/{id}/subtasks - 获取子任务列表

**前端页面**:
- [ ] 任务详情页显示子任务列表
- [ ] 子任务可勾选完成
- [ ] 进度自动计算

#### 1.3 家务排班表
**数据库**: task_schedule表 ✅
**后端API**:
- [ ] POST /api/schedule - 创建排班
- [ ] GET /api/schedule/{familyId} - 获取排班表
- [ ] PUT /api/schedule/{id} - 修改排班
- [ ] DELETE /api/schedule/{id} - 删除排班
- [ ] GET /api/schedule/today - 获取今日值班

**前端页面**:
- [ ] 新增"排班表"页面
- [ ] 周视图展示
- [ ] 拖拽调整

#### 1.4 任务提醒功能
**数据库**: task_reminder表 ✅
**后端API**:
- [ ] POST /api/task/{id}/reminder - 设置提醒
- [ ] 时间提醒（定时推送）
- [ ] 位置提醒（地理围栏）

**前端页面**:
- [ ] 提醒设置弹窗
- [ ] 时间选择器
- [ ] 地图选点（位置提醒）

---

### 第二阶段：心愿系统增强（预计1天）

#### 2.1 心愿预算
**数据库**: wish_budget表 ✅
**后端API**:
- [ ] POST /api/wish/{id}/budget - 设置预算
- [ ] GET /api/wish/budget-stats - 预算统计

**前端页面**:
- [ ] 心愿卡片显示预算进度条
- [ ] 预算设置弹窗

#### 2.2 心愿里程碑
**数据库**: wish_milestone表 ✅
**后端API**:
- [ ] POST /api/wish/{id}/milestone - 添加里程碑
- [ ] PUT /api/milestone/{id}/complete - 完成里程碑
- [ ] GET /api/wish/{id}/milestones - 获取里程碑列表

**前端页面**:
- [ ] 里程碑时间线展示
- [ ] 进度百分比

#### 2.3 隐私心愿
**后端API**:
- [ ] wish表增加visibility字段
- [ ] 筛选逻辑修改

**前端页面**:
- [ ] 创建时隐私开关

---

### 第三阶段：购物系统增强（预计1.5天）

#### 3.1 扫码录入
**后端API**:
- [ ] POST /api/shopping/scan - 扫码识别
- [ ] 对接商品条码库

**前端页面**:
- [ ] 扫码界面
- [ ] 扫码结果确认

#### 3.2 价格追踪
**数据库**: price_history表 ✅
**后端API**:
- [ ] POST /api/shopping/price-record - 记录价格
- [ ] GET /api/shopping/price-trend - 价格趋势

**前端页面**:
- [ ] 价格曲线图
- [ ] 最低价提醒

#### 3.3 优惠券管理
**数据库**: coupon表 ✅
**后端API**:
- [ ] POST /api/coupon - 添加优惠券
- [ ] GET /api/coupons - 优惠券列表
- [ ] PUT /api/coupon/{id}/use - 标记使用

**前端页面**:
- [ ] 优惠券列表
- [ ] 到期提醒

---

### 第四阶段：健康系统增强（预计1天）

#### 4.1 体重记录
**数据库**: user_weight表 ✅
**后端API**: WeightController ✅
- [x] POST /api/diet/weight/record - 记录体重
- [x] GET /api/diet/weight/history - 历史记录
- [x] GET /api/diet/weight/latest - 最新体重

**前端页面**:
- [ ] 体重记录弹窗
- [ ] 趋势曲线图

#### 4.2 营养成分分析
**数据库**: diet_nutrition_detail表 ✅
**后端API**:
- [ ] GET /api/diet/nutrition/daily - 每日营养分析
- [ ] GET /api/diet/nutrition/weekly - 周营养报告

**前端页面**:
- [ ] 营养成分饼图
- [ ] 摄入建议

#### 4.3 喝水打卡
**数据库**: 新增 water_record表
**后端API**:
- [ ] POST /api/diet/water - 记录喝水
- [ ] GET /api/diet/water/today - 今日喝水量

**前端页面**:
- [ ] 喝水打卡按钮
- [ ] 8杯水进度展示

---

### 第五阶段：纪念日增强（预计1天）

#### 5.1 农历支持
**后端API**:
- [ ] 集成农历转换库
- [ ] anniversary表增加lunar_date字段

**前端页面**:
- [ ] 农历/公历切换
- [ ] 传统节日自动显示

#### 5.2 多级提醒
**数据库**: anniversary_reminder表 ✅
**后端API**:
- [ ] POST /api/anniversary/reminder - 设置提醒

**前端页面**:
- [ ] 提醒设置（3天/7天/30天）

#### 5.3 贺卡生成
**后端API**:
- [ ] POST /api/anniversary/card - 生成贺卡

**前端页面**:
- [ ] 贺卡模板选择
- [ ] 分享功能

---

### 第六阶段：积分商城（预计1天）

#### 6.1 积分兑换券
**数据库**: points_coupon表 ✅
**后端API**: CouponController ✅
- [x] GET /api/game/coupon/list
- [ ] POST /api/game/coupon/exchange

**前端页面**:
- [ ] 券列表
- [ ] 兑换确认

#### 6.2 我的券包
**数据库**: points_coupon_record表 ✅
**后端API**:
- [ ] GET /api/game/my-coupons - 我的券
- [ ] POST /api/game/coupon/use - 使用券

**前端页面**:
- [ ] 我的券包页面
- [ ] 券详情/使用

---

### 第七阶段：家庭报告（预计1.5天）

#### 7.1 报告生成
**数据库**: family_report表 ✅
**后端API**:
- [ ] POST /api/report/generate - 生成报告
- [ ] GET /api/report/{id} - 获取报告
- [ ] GET /api/reports - 报告列表

**前端页面**:
- [ ] 报告列表
- [ ] 报告详情页

#### 7.2 数据可视化
**前端页面**:
- [ ] 周/月/年切换
- [ ] 多种图表类型

---

### 第八阶段：其他功能（预计1天）

#### 8.1 多家庭切换
**后端API**:
- [ ] user表增加当前家庭字段
- [ ] 切换家庭接口

**前端页面**:
- [ ] 家庭切换下拉框
- [ ] 创建/加入家庭

#### 8.2 深色模式
**前端页面**:
- [ ] 主题切换开关
- [ ] 深色样式适配

#### 8.3 数据导出
**后端API**:
- [ ] GET /api/export/family-data - 导出数据

**前端页面**:
- [ ] 导出按钮
- [ ] 导出选项

---

## 📊 总进度统计

| 阶段 | 功能数 | 预计时间 | 状态 |
|------|--------|---------|------|
| 第一阶段 | 4个 | 2天 | 🔄 开发中 |
| 第二阶段 | 3个 | 1天 | ⏳ 待开始 |
| 第三阶段 | 3个 | 1.5天 | ⏳ 待开始 |
| 第四阶段 | 3个 | 1天 | 🔄 开发中 |
| 第五阶段 | 3个 | 1天 | ⏳ 待开始 |
| 第六阶段 | 2个 | 1天 | 🔄 开发中 |
| 第七阶段 | 2个 | 1.5天 | ⏳ 待开始 |
| 第八阶段 | 3个 | 1天 | ⏳ 待开始 |

**总计**: 23个功能模块，预计 **10天** 完成

---

## 🎯 下一步行动

立即开始第一阶段开发？请回复：
- **"开始第一阶段"** - 开发任务系统增强
- **"自定义顺序"** - 告诉我你想先开发哪些功能
- **"查看当前进度"** - 汇报最新开发状态
