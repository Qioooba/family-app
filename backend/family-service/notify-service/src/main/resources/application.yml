server:
  port: 8085

spring:
  main:
    allow-bean-definition-overriding: true
  autoconfigure:
    exclude:
      - org.redisson.spring.starter.RedissonAutoConfigurationV2
  application:
    name: notify-service
  
  datasource:
    url: jdbc:mysql://localhost:3306/family_app?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    username: ${MYSQL_USERNAME:root}
    password: your_secure_mysql_password
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      idle-timeout: 300000
      connection-timeout: 20000
  
  redis:
    host: ${REDIS_HOST:localhost}
    port: ${REDIS_PORT:6379}
    password:
    database: ${REDIS_DB:0}
    lettuce:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0
  redisson:
    password:
  
  mail:
    host: ${MAIL_HOST:smtp.gmail.com}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME:}
    password: 123456
    protocol: smtp
    default-encoding: UTF-8
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
          ssl:
            trust: ${MAIL_HOST:smtp.gmail.com}

mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    map-underscore-to-camel-case: true
  global-config:
    db-config:
      id-type: auto
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0
  mapper-locations: classpath*:/mapper/**/*.xml

sa-token:
  token-name: Authorization
  timeout: 2592000
  activity-timeout: -1
  is-concurrent: true
  is-share: false
  token-style: uuid
  is-log: false

# 通知服务配置
family:
  notify:
    # 是否开启定时发送任务
    enable-scheduled-task: true
    # 定时任务执行间隔（分钟）
    scheduled-interval: 1
    # 微信模板消息配置
    wechat:
      app-id: ${WECHAT_APP_ID:}
      app-secret: ${WECHAT_APP_SECRET:}
      template-id-prefix: ${WECHAT_TEMPLATE_PREFIX:}
    # 短信配置
    sms:
      provider: ${SMS_PROVIDER:aliyun}
      access-key: ${SMS_ACCESS_KEY:}
      secret-key: ${SMS_SECRET_KEY:}
      sign-name: ${SMS_SIGN_NAME:家庭助手}

logging:
  level:
    com.family: DEBUG
    com.family.notify: DEBUG

management:
  health:
    mail:
      enabled: false
