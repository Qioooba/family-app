# 🛒 智能购物功能 - 待开发

## 功能概述
智能购物助手，帮助家庭管理采购清单、比价、库存管理。

## 功能清单

### 1. 购物清单管理

#### 1.1 自动生成购物清单
- [ ] 根据菜谱自动生成购物清单
  - 分析菜谱所需食材
  - 对比现有库存自动去重
  - 生成采购清单
  
- [ ] 手动添加购物项
  - 文字输入
  - 语音输入
  - 扫码添加

#### 1.2 购物清单分类
- [ ] 按超市区域分类
  - 蔬菜区
  - 肉类区
  - 海鲜区
  - 调料区
  - 日用品区
  
- [ ] 按紧急程度分类
  - 急需
  - 正常
  - 可延后

#### 1.3 购物清单协作
- [ ] 家庭成员共享清单
- [ ] 实时同步购买状态
- [ ] 边买边勾（已买/未买）
- [ ] 指派采购人

### 2. 扫码购物

#### 2.1 商品扫码识别
- [ ] 扫描商品条形码
- [ ] 识别商品信息（名称/价格/规格）
- [ ] 添加到购物清单

#### 2.2 价格比较
- [ ] 历史价格对比
- [ ] 线上线下价格对比
- [ ] 不同平台价格对比（淘宝/京东/拼多多）
- [ ] 价格趋势图

#### 2.3 商品信息分析
- [ ] 营养成分表OCR识别
- [ ] 过敏原提示
- [ ] 配料表分析
- [ ] 保质期提醒

### 3. 库存管理

#### 3.1 入库登记
- [ ] 拍照/扫码录入
- [ ] 手动录入
- [ ] 批量导入
- [ ] 语音录入

#### 3.2 库存看板
- [ ] 冰箱库存可视化
- [ ] pantry库存管理
- [ ] 按分类查看库存
- [ ] 库存数量预警

#### 3.3 保质期追踪
- [ ] 自动计算保质期
- [ ] 临期提醒（3天/7天）
- [ ] 过期预警
- [ ] 消耗速度统计

#### 3.4 智能补货
- [ ] 根据消耗速度预测补货时间
- [ ] 常用物品自动加入购物清单
- [ ] 季节性物品推荐

### 4. 采购管理

#### 4.1 采购记录
- [ ] 记录每次采购明细
- [ ] 采购金额统计
- [ ] 采购频次分析
- [ ] 供应商管理

#### 4.2 预算管理
- [ ] 月度采购预算设置
- [ ] 实时预算消耗展示
- [ ] 超预算预警
- [ ] 分类预算控制

#### 4.3 优惠管理
- [ ] 优惠券记录
- [ ] 满减活动提醒
- [ ] 会员卡管理
- [ ] 积分管理

### 5. 技术实现

#### 5.1 后端API设计
```java
// 购物清单接口
POST /api/shopping/list/create
GET /api/shopping/list/{familyId}
PUT /api/shopping/list/{id}
DELETE /api/shopping/list/{id}

// 扫码识别接口
POST /api/shopping/scan
Request: {
  "barcode": "6901234567890",
  "image": "base64..."
}
Response: {
  "productName": "可口可乐",
  "brand": "可口可乐",
  "spec": "330ml",
  "price": 3.5,
  "nutrition": {...},
  "allergens": []
}

// 价格比较接口
GET /api/shopping/price-compare?barcode=xxx
Response: {
  "currentPrice": 3.5,
  "historyLow": 2.8,
  "historyHigh": 4.0,
  "platforms": [
    {"name": "京东", "price": 3.5, "url": "..."},
    {"name": "淘宝", "price": 3.2, "url": "..."}
  ]
}

// 库存管理接口
POST /api/shopping/inventory/add
GET /api/shopping/inventory/{familyId}
PUT /api/shopping/inventory/{id}
GET /api/shopping/inventory/expiring/{familyId}
```

#### 5.2 前端页面
```
frontend/src/pages/shopping/
├── index.vue          # 购物清单首页
├── list.vue           # 清单详情
├── scan.vue           # 扫码页面
├── inventory.vue      # 库存管理
├── price-compare.vue  # 价格比较
└── budget.vue         # 预算管理
```

#### 5.3 需要接入的第三方服务
```yaml
# 条形码查询API
- 中国物品编码中心
- 聚合数据条形码API
- 阿里云市场条码识别

# 价格比较API
- 慢慢买价格历史
- 什么值得买API

# OCR识别
- 百度AI文字识别
- 腾讯云OCR
```

### 6. 数据库表
```sql
-- 购物清单表
CREATE TABLE shopping_list (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    family_id BIGINT NOT NULL,
    name VARCHAR(100) COMMENT '清单名称',
    type ENUM('auto', 'manual') DEFAULT 'manual',
    status TINYINT DEFAULT 0 COMMENT '0进行中 1已完成',
    total_amount DECIMAL(10,2) COMMENT '总金额',
    creator_id BIGINT,
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    complete_time DATETIME
);

-- 购物清单项表
CREATE TABLE shopping_item (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    list_id BIGINT NOT NULL,
    name VARCHAR(100) NOT NULL,
    category VARCHAR(50),
    quantity DECIMAL(10,2),
    unit VARCHAR(20),
    estimated_price DECIMAL(10,2),
    actual_price DECIMAL(10,2),
    status TINYINT DEFAULT 0 COMMENT '0未买 1已买',
    barcode VARCHAR(50),
    assignee_id BIGINT,
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- 库存表
CREATE TABLE inventory (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    family_id BIGINT NOT NULL,
    name VARCHAR(100) NOT NULL,
    category VARCHAR(50),
    quantity DECIMAL(10,2),
    unit VARCHAR(20),
    storage_location VARCHAR(50),
    purchase_date DATE,
    expire_date DATE,
    barcode VARCHAR(50),
    price DECIMAL(10,2),
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- 采购记录表
CREATE TABLE purchase_record (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    family_id BIGINT NOT NULL,
    store_name VARCHAR(100),
    total_amount DECIMAL(10,2),
    items JSON,
    purchase_date DATE,
    receipt_image VARCHAR(255),
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

## 开发优先级
1. P0 - 购物清单CRUD
2. P0 - 扫码识别
3. P1 - 库存管理
4. P1 - 价格比较
5. P2 - 预算管理
6. P2 - 优惠管理

## 预估开发时间
- 后端API开发：4天
- 扫码功能接入：2天
- 前端页面开发：4天
- 联调测试：2天
- **总计：约12天**
